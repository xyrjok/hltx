<div contenteditable="true" translate="no" class="ProseMirror"><h1><span class="selected">Cloudflare</span> 自动发卡站 - 纯浏览器建站指南</h1><p>本指南将指导你如何在<strong>只有浏览器</strong>的情况下，完成整个网站的搭建和部署。</p><p>你不需要在你的电脑上安装任何软件。我们将使用 GitHub 网页版 和 Cloudflare 网页版。</p><h2>目录</h2><ul><li><p><strong>第一部分：准备工作</strong> (注册账号)</p></li><li><p><strong>第二部分：部署前端 (Cloudflare Pages)</strong></p></li><li><p><strong>第三部分：部署后端 (Cloudflare Worker)</strong></p></li><li><p><strong>第四部分：连接前端和后端</strong></p></li><li><p><strong>第五部分：上线！</strong></p></li></ul><h2>第一部分：准备工作</h2><ol><li><p><strong>注册 GitHub 账号:</strong> 访问 <code>github.com</code> 并注册一个免费账号。</p></li><li><p><strong>注册 Cloudflare 账号:</strong> 访问 <code>dash.cloudflare.com</code> 并注册一个免费账号。</p></li></ol><h2>第二部分：部署前端 (Cloudflare Pages)</h2><p>我们将把所有前端文件 (<code>.html</code> 和 <code>static/style.css</code>) 上传到 GitHub，然后让 Cloudflare Pages 自动部署它们。</p><h3>步骤 1: 在 GitHub 上创建代码仓库 (Repo)</h3><ol><li><p>登录 GitHub。</p></li><li><p>点击右上角的 "+" 号，选择 "New repository" (新建仓库)。</p></li><li><p><strong>仓库名称:</strong> 填入 <code>my-card-site</code> (或者你喜欢的任何名字)。</p></li><li><p><strong>设置为:</strong> "Public" (公开)。</p></li><li><p>点击 "Create repository" (创建仓库)。</p></li></ol><h3>步骤 2: 在 GitHub 网页版上传文件 (核心)</h3><p>你会看到一个空仓库页面。我们要把项目文件一个一个传上去。</p><ol><li><p><strong>创建 <code>index.html</code>:</strong></p><ul><li><p>点击 "Add file" -&gt; "Create new file" (创建新文件)。</p></li><li><p>在顶部的"文件名"框中，输入 <code>index.html</code>。</p></li><li><p>把 <code>index.html</code> 文件中的代码<strong>复制</strong>并<strong>粘贴</strong>到下方的编辑框中。</p></li><li><p>点击 "Commit changes" (提交更改)。</p></li></ul></li><li><p><strong>创建 <code>product.html</code>:</strong></p><ul><li><p>返回仓库主页 (点击你的仓库名 <code>my-card-site</code>)。</p></li><li><p>点击 "Add file" -&gt; "Create new file"。</p></li><li><p>文件名: <code>product.html</code>。</p></li><li><p><strong>复制</strong>并<strong>粘贴</strong> <code>product.html</code> 的代码。</p></li><li><p>点击 "Commit changes"。</p></li></ul></li><li><p><strong>创建 <code>pay.html</code> 和另外两个 <code>html</code> 文件:</strong></p><ul><li><p>重复上述步骤，创建 <code>pay.html</code>, <code>articles.html</code>, 和 <code>article.html</code>。</p></li></ul></li><li><p><strong>创建 <code>static/style.css</code> (重要！):</strong></p><ul><li><p>返回仓库主页。</p></li><li><p>点击 "Add file" -&gt; "Create new file"。</p></li><li><p><strong>在文件名框里，输入 <code>static/style.css</code></strong> (输入 <code>static/</code> 会自动创建文件夹)。</p></li><li><p><strong>复制</strong>并<strong>粘贴</strong> <code>static/style.css</code> 的代码。</p></li><li><p>点击 "Commit changes"。</p></li></ul></li></ol><p>现在，你的 GitHub 仓库应该有 5 个 <code>.html</code> 文件在根目录，以及一个 <code>static</code> 文件夹，里面有 <code>style.css</code>。</p><h3>步骤 3: 在 Cloudflare 上创建 Pages 项目</h3><ol><li><p>登录 Cloudflare 仪表板。</p></li><li><p>在右侧菜单中，点击 "Workers &amp; Pages"。</p></li><li><p>点击 "Create application" (创建应用) -&gt; 选择 "Pages" -&gt; "Connect to Git" (连接到 Git)。</p></li><li><p>选择你刚创建的 <code>my-card-site</code> 仓库，然后 "Begin setup" (开始设置)。</p></li><li><p><strong>构建和部署:</strong></p><ul><li><p><strong>项目名称:</strong> 保持默认 (<code>my-card-site</code>)。</p></li><li><p><strong>构建设置:</strong> <strong>这一步最关键！</strong></p><ul><li><p>选择 "Framework preset" (框架预设) 为 <strong>"None" (无)</strong>。</p></li></ul></li><li><p>点击 "Save and Deploy" (保存并部署)。</p></li></ul></li></ol><p>等待 1 分钟，Cloudflare 就会部署你的网站。部署完成后，你会得到一个 <code>.pages.dev</code> 网址 (例如 <code>my-card-site.pages.dev</code>)。</p><p><strong>此时访问它，页面会显示，但会报错，因为后端 API 还没部署。</strong></p><h2>第三部分：部署后端 (Cloudflare Worker)</h2><p>我们将把 <code>worker.js</code> 的代码部署为一个 Cloudflare Worker 服务。</p><ol><li><p>在 Cloudflare 仪表板，返回 "Workers &amp; Pages" 概览。</p></li><li><p>点击 "Create application" (创建应用) -&gt; 选择 "Worker"。</p></li><li><p><strong>服务名称:</strong> 输入 <code>my-api-worker</code> (或你喜欢的名字)。</p></li><li><p>点击 "Deploy" (部署)。</p></li><li><p>部署完成后，点击 "Edit code" (编辑代码)。</p></li><li><p>你会看到一个代码编辑器，里面有一些默认代码。</p></li><li><p><strong>删除</strong>编辑器里所有默认代码。</p></li><li><p><strong>复制</strong> <code>worker.js</code> 文件中的<strong>所有代码</strong>，<strong>粘贴</strong>到 Cloudflare 的代码编辑器中。</p></li><li><p>点击右上角的 "Save and Deploy" (保存并部署)。</p></li></ol><p>你的模拟后端 API 现在已经上线了！</p><h2>第四部分：连接前端和后端 (关键)</h2><p>最后一步，我们要告诉你的前端网站 (Pages) 如何找到你的后端 API (Worker)。</p><ol><li><p>在 Cloudflare 仪表板，返回 "Workers &amp; Pages" 概览。</p></li><li><p>点击你的 Pages 项目 (<code>my-card-site</code>)。</p></li><li><p>点击 "Settings" (设置) -&gt; "Functions" (函数)。</p></li><li><p>向下滚动到 <strong>"Service bindings" (服务绑定)</strong>。</p></li><li><p>点击 "Add binding" (添加绑定):</p><ul><li><p><strong>Service name (服务名称):</strong> 输入 <code>api</code> (这个名字可以随便取，但要记住)。</p></li><li><p><strong>Service (服务):</strong> 选择你上一步创建的 Worker，即 <code>my-api-worker</code>。</p></li></ul></li><li><p>点击 "Save" (保存)。</p></li><li><p><strong>最重要的一步：添加路由</strong></p><ul><li><p>在你的 <code>my-card-site</code> 仓库中 (回到 GitHub 网页版)。</p></li><li><p>在根目录创建一个<strong>新文件</strong>。</p></li><li><p>文件名必须是 <code>_routes.json</code>。</p></li><li><p>文件内容如下 (直接复制粘贴):</p><pre><code>{
  "version": 1,
  "include": ["/api/*"],
  "exclude": [],
  "bindings": {
    "/api/*": "api"
  }
}
<br class="ProseMirror-trailingBreak"></code></pre></li><li><p><strong>解释:</strong> 这告诉 Pages，所有 <code>/api/*</code> 的请求都应该被转发到你绑定的、名为 <code>api</code> 的服务 (也就是你的 <code>my-api-worker</code>)。</p></li><li><p>提交这个 <code>_routes.json</code> 文件。</p></li></ul></li></ol><h2>第五部分：上线！</h2><p>回到 Cloudflare Pages 的部署页面，你会看到它因为你提交了 <code>_routes.json</code> 而正在<strong>自动重新部署</strong>。</p><p>等待部署完成后，再次访问你的 <code>.pages.dev</code> 网址。</p><p><strong>恭喜！</strong> 你现在有了一个功能完整、外观精美的前端网站，它正在从你的 Cloudflare Worker (模拟后端) 获取数据并正常运转！</p><h3>下一步</h3><p>这个 <code>worker.js</code> 是<strong>模拟</strong>的。你的下一步是：</p><ol><li><p>在 Cloudflare 仪表板创建 D1 数据库。</p></li><li><p>在 <code>my-api-worker</code> 的设置中，绑定 D1 数据库。</p></li><li><p>修改 <code>worker.js</code> 的代码 (在 Cloudflare 网页编辑器中)，将 <code>handleGetProducts</code> 等函数从返回假数据，改为查询 D1 数据库。</p></li></ol></div>
